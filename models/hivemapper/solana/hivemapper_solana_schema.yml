version: 2

models:
  - name: hivemapper_solana_rewards
    meta:
      blockchain: solana
      project: hivemapper
      contributors: [ilemi, alexus98]
    config:
      tags: ['hivemapper', 'solana', 'reward', 'honey']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - 'tx_id'
            - 'outer_instruction_index'
            - 'inner_instruction_index' 
            - 'block_slot'

    description: >
        List of HONEY rewards distributed for contributors
    columns:
      - name: reward_type
      - name: block_time
      - name: block_date
      - name: block_slot
      - name: action
      - name: amount
        tests:
          - dbt_utils.expression_is_true:
              expression: "amount / 1e9 >= 0 AND amount / 1e9 <= 10000000" # so far the biggest reward was 125k HONEY
      - name: token_mint_address
      - name: from_owner
      - name: to_owner
      - name: from_token_account
      - name: to_token_account
      - name: tx_signer
      - name: tx_id
        
       
